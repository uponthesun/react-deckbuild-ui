(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(t,e,n){t.exports=n(38)},35:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var a=n(5),r=n(6),o=n(14),c=n(15),i=n(22),u=n(1),s=n.n(u),l=n(24),d=n.n(l),p=n(27),m=n(40),f=n(42),h=n(41),b=(n(35),n(25)),v=n(3),C=n.n(v),y=n(21),S=n(12),j=function(){function t(e,n){Object(a.a)(this,t),e||(e=[]),this.numCols=n,this.loadCardPool(e)}return Object(r.a)(t,[{key:"loadCardPool",value:function(){var t=Object(S.a)(C.a.mark((function t(e){var n=this;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cardColumns=Object(y.a)(Array(this.numCols)).map((function(t){return[]})),this.nextId=0,e.forEach((function(t){return n.addCard(t)}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addCard",value:function(){var t=Object(S.a)(C.a.mark((function t(e){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:e,id:this.nextId,currentBoard:this},this.cardColumns[0].push(n),this.nextId++,O(e).then((function(t){return n.data=t})),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"moveCard",value:function(){var t=Object(S.a)(C.a.mark((function t(e,n,a){var r,o,c,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=e.currentBoard,o=0;o<r.cardColumns.length;o++)for(c=r.cardColumns[o],i=0;i<c.length;i++)c[i].id===e.id&&c.splice(i,1);a=Math.min(a,this.cardColumns[n].length),this.cardColumns[n].splice(a,0,e),e.currentBoard=this;case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"sortByCmc",value:function(){var t,e=Object(y.a)(Array(this.numCols)).map((function(t){return[]})),n=Object(b.a)(this.cardColumns.flat());try{for(n.s();!(t=n.n()).done;){var a=t.value;e[Math.min(a.data.cmc,7)].push(a)}}catch(r){n.e(r)}finally{n.f()}return this.cardColumns=e,this}}]),t}(),O=function(){var t=Object(S.a)(C.a.mark((function t(e){var n,a,r,o;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.scryfall.com/cards/named?exact=".concat(encodeURI(e)),t.next=3,fetch(n);case 3:return a=t.sent,t.next=6,a.json();case 6:return r=t.sent,(o=r.color_identity.join("")).length>1?o="M":0===o.length&&(o="C"),t.abrupt("return",{color_pile:o,cmc:r.cmc});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(t){return s.a.createElement("textarea",{id:t.id,rows:"5",cols:"33"})},E=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"load",value:function(){var t=document.getElementById(this.props.inputElementId).value.split("\n").map((function(t){var e;return e=t[0],(t=Number.isNaN(Number(e))?t:t.substring(t.indexOf(" "))).trim()})).filter((function(t){return t.trim().length>0})),e=this.props.topLevelContainer.state.boardState.numCols;this.props.topLevelContainer.setState({boardState:new j(t,e),sideboardState:new j([],1)})}},{key:"render",value:function(){var t=this;return s.a.createElement("input",{type:"button",onClick:function(){return t.load()},value:"Load cards"})}}]),n}(s.a.Component),g=function(t){return s.a.createElement("input",{type:"button",onClick:function(){var e,n,a,r=(e=t.boardState.cardColumns.flat(),n=t.sideboardState.cardColumns.flat(),e.map((function(t){return t.name})).join("\n")+"\n\n// Sideboard\n"+n.map((function(t){return t.name})).join("\n"));a=r,navigator.clipboard.writeText(a).then((function(){return alert("Copied to clipboard:\n\n".concat(a))}),(function(){return alert("Failed to copy to clipboard")}))},value:"Export to Cockatrice"})},k=["Battle Hymn","Reaper King","Death or Glory","Mindless Automaton","Wizard Mentor","Crow Storm","Gaea's Touch"];function w(t){var e=Object(f.a)({item:{type:"Card",card:t.card}}),n=Object(i.a)(e,2),a=(n[0],n[1]),r="https://api.scryfall.com/cards/named?format=image&exact=".concat(encodeURI(t.card.name));return s.a.createElement("img",{ref:a,src:r,width:146,height:204,style:{position:"absolute",top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),zIndex:"".concat(t.zIndex)}})}function I(t){for(var e=Object(h.a)({accept:"Card",drop:function(e,n){return M(t.boardState,n.getClientOffset(),e.card)},collect:function(t){return{mousePos:t.getClientOffset()}}}),n=Object(i.a)(e,2),a=(n[0].mousePos,n[1]),r=[],o=t.boardState.cardColumns,c=0;c<o.length;c++)for(var u=0;u<o[c].length;u++){var l=o[c][u],d=25*u,p=147*c;r.push(s.a.createElement(w,{key:l.id.toString(),card:l,top:d,left:p,zIndex:u}))}var m=147*t.boardState.numCols;return s.a.createElement("div",{ref:a,className:"card-space",style:{position:"relative",width:"".concat(m,"px")}},r)}var M=function(t,e,n){var a=Math.min(Math.floor(e.x/147),t.numCols-1),r=Math.floor(e.y/25);t.moveCard(n,a,r)};function B(t){return s.a.createElement("input",{type:"button",onClick:function(){return t.topLevelContainer.setState({boardState:t.topLevelContainer.state.boardState.sortByCmc()})},value:"Sort by CMC"})}var L=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={boardState:new j(k,8),sideboardState:new j([],1)},r}return Object(r.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(I,{boardState:this.state.boardState}),s.a.createElement(I,{boardState:this.state.sideboardState}),s.a.createElement(x,{id:"card-pool-input"}),s.a.createElement(E,{inputElementId:"card-pool-input",topLevelContainer:this}),s.a.createElement(B,{topLevelContainer:this}),s.a.createElement(g,{boardState:this.state.boardState,sideboardState:this.state.sideboardState}))}}]),n}(s.a.Component);d.a.render(s.a.createElement(m.a,{backend:p.a},s.a.createElement(L,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.be47a65c.chunk.js.map