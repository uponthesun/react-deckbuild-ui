{"version":3,"sources":["boardState.js","importExport.js","landAdder.js","cardLoader.js","sampleHand.js","index.js"],"names":["BoardState","cardLoader","cardEntries","numCols","parentComponent","this","loadCardPool","cardColumns","Array","map","_","entry","createAndAddCards","then","value","setState","cardEntry","n","quantity","getCardData","name","set","newCard","currentBoard","push","result","card","newCol","newIndexInCol","undefined","length","splice","col","cardCol","i","id","JSON","stringify","removeCard","addCard","flat","newCardColumns","data","cmc","mana_cost","includes","split","color_pile","Math","min","sort","c1","c2","localeCompare","colorColumns","monocolorCards","filter","c","multicolorCards","colors","indexOf","includeSet","cardToText","line","counts","cardAsText","hasOwnProperty","Object","entries","join","CardPoolInput","props","rows","cols","initialText","parseCardPoolText","cardPoolText","lines","l","trim","sections","currentSection","parseLine","text","part1","part2","Number","isNaN","quantityPart","substring","endsWith","slice","LoadInputButton","rawInput","document","getElementById","inputElementId","maindeckCardEntries","sideboardCardEntries","topLevelContainer","state","boardState","sideboardState","type","onClick","load","React","Component","cardPoolToText","maindeck","sideboard","asText","writeToClipboardAndAlert","navigator","clipboard","writeText","alert","ExportButton","output","SaveLinkButton","encoded","window","btoa","history","replaceState","location","href","LandAdder","selectorId","inputCountId","max","placeholder","land","count","parseInt","addLand","CardLoader","nextId","cardDataCache","cardName","getScryfallCardData","url","encodeURI","fetch","response","json","cardJson","assign","imageURL","console","error","SampleHandModalButton","showModal","handleOpenModal","handleCloseModal","isOpen","onRequestClose","contentLabel","style","overlay","zIndex","maindeckBoardState","SampleHandModalContent","getNewHandState","lockedCard","shuffledDeck","a","j","floor","random","shuffle","getCards","hand","findIndex","numCardsToDraw","pop","e","target","images","src","width","height","options","from","Set","drawCard","onChange","handleChange","tabindex","DEFAULT_INITIAL_CARDS","Card","useDrag","item","collect","monitor","isDragging","drag","useState","hoverVisible","setHoverVisible","hoverVisibility","ref","moveCardToOtherBoard","onMouseMove","onMouseLeave","position","top","left","IMG_WIDTH","IMG_HEIGHT","visibility","Board","useDrop","accept","drop","dropCard","getClientOffset","mousePos","cardImages","topOffset","leftOffset","key","toString","widthPx","className","bottom","right","numCards","clientOffset","x","y","moveCard","SortByCmcButton","sortByCmc","SortByColorButton","sortByColor","Instructions","float","initialCards","encodedCardsFromParams","URLSearchParams","search","get","atob","TopLevelContainer","board","otherBoard","landName","ReactDOM","render","HTML5toTouch"],"mappings":"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","file":"static/js/main.b04b5434.chunk.js","sourcesContent":["// Manages state of a \"board\". Purely a logical representation, doesn't know about React components.\nexport default class BoardState {\n  // cardEntries - Array of objects with keys: {name, quantity, set}\n  constructor(cardLoader, cardEntries, numCols, parentComponent = null) {\n    this.cardLoader = cardLoader;\n    this.numCols = numCols;\n    this.loadCardPool(cardEntries, parentComponent);\n  }\n\n  async loadCardPool(cardEntries, parentComponent) {\n    this.cardColumns = [...Array(this.numCols)].map(_ => []); // Initialize with numCols empty arrays\n    for (var entry of cardEntries) {\n      // TODO: A major refactor is needed to simplify state management. Not sure how best to it,\n      // but one option could be to merge this class with the Board react component. Until then,\n      // we need this manual refresh.\n      this.createAndAddCards(entry).then(value => {\n        if (parentComponent) {\n          parentComponent.setState({});\n        }\n      })\n    }\n  }\n\n  // Creates a new card object, including initializing it with Scryfall data and a unique ID,\n  // and adds it to this board.\n  async createAndAddCards(cardEntry) {\n    var result;\n    for (var n = 0; n < cardEntry.quantity; n++) {\n      const newCard = await this.cardLoader.getCardData(cardEntry.name, cardEntry.set);\n      newCard.currentBoard = this;\n      this.cardColumns[0].push(newCard);\n      result = newCard;\n    }\n    return result;\n  }\n\n  // Adds the given card object to this board. Does not create a new card object.\n  // Can optionally specify where the new card should be inserted (defaults to bottom of first column).\n  addCard(card, newCol = 0, newIndexInCol = undefined) {\n    if (!newIndexInCol || newIndexInCol > this.cardColumns[newCol].length) {\n      newIndexInCol = this.cardColumns[newCol].length;\n    }\n\n    this.cardColumns[newCol].splice(newIndexInCol, 0, card);\n    card.currentBoard = this;\n  }\n\n  // Removes the given card from this board and returns it.\n  removeCard(card) {\n    // TODO: could consider storing mapping of id to position to avoid for loop lookup\n    for (var col = 0; col < this.cardColumns.length; col++) {\n      const cardCol = this.cardColumns[col];\n      for (var i = 0; i < cardCol.length; i++) {\n        if (cardCol[i].id === card.id) {\n          cardCol.splice(i, 1);\n          return card;\n        }\n      }\n    }\n\n    throw \"Tried to remove card, but it wasn't in this board: \" + JSON.stringify(card);\n  }\n\n  // Moves a card into the specified position in this board. If it was in a different board previously,\n  // first removes it from that board.\n  async moveCard(card, newCol, newIndexInCol) {\n    card.currentBoard.removeCard(card);\n    this.addCard(card, newCol, newIndexInCol);\n  }\n\n  numCards() {\n    return this.cardColumns.flat().length;\n  }\n\n  getCards() {\n    return this.cardColumns.flat();\n  }\n\n  sortByCmc() {\n    const newCardColumns = [...Array(this.numCols)].map(_ => []);\n\n    for (var card of this.cardColumns.flat()) {\n      var col = card.data.cmc;\n      if (card.data.mana_cost.includes('{X}')) {\n        // Assume each X must be at least 1\n        const numXes = (card.data.mana_cost.split('{X}').length - 1)\n        col += numXes;\n      }\n      if (col === 0 && card.data.color_pile !== 'L') {\n        // nonland 0-drops should be in 1-drop column\n        col = 1;\n      }\n      col = Math.min(col, 7); // everything CMC 7 and up goes in one pile\n\n      newCardColumns[col].push(card);\n    }\n    for (var column of newCardColumns) {\n      column.sort((c1, c2) => c1.name.localeCompare(c2.name))\n    }\n\n    this.cardColumns = newCardColumns;\n    return this;\n  }\n\n  sortByColor() {\n    const newCardColumns = [...Array(this.numCols)].map(_ => []);\n\n    const colorColumns = ['L', 'W', 'U', 'B', 'R', 'G', 'C', 'M'];\n\n    const monocolorCards = this.cardColumns.flat().filter(c => c.data.color_pile !== 'M');\n    const multicolorCards = this.cardColumns.flat().filter(c => c.data.color_pile === 'M');\n    multicolorCards.sort((c1, c2) => c1.data.colors.localeCompare(c2.data.colors));\n\n    for (var card of [...monocolorCards, ...multicolorCards]) {\n      const col = colorColumns.indexOf(card.data.color_pile);\n      newCardColumns[col].push(card);\n    }\n    for (var column of newCardColumns) {\n      column.sort((c1, c2) => c1.name.localeCompare(c2.name))\n    }\n\n    this.cardColumns = newCardColumns;\n    return this;\n  }\n\n  asText(includeSet) {\n    const cardToText = (c) => {\n      var line = c.name;\n      if (includeSet && c.set) {\n        line += ` (${c.set})`\n      }\n      return line;\n    };\n\n    const counts = {};\n    for (var card of this.cardColumns.flat()) {\n      const cardAsText = cardToText(card);\n      if (!counts.hasOwnProperty(cardAsText)) {\n        counts[cardAsText] = 0;\n      }\n      counts[cardAsText]++;\n    }\n\n    return Object.entries(counts).map(entry => `${entry[1]} ${entry[0]}`).join(\"\\n\");\n  }\n}\n\n","// This file contains components and logic related to importing and exporting from text formats.\n\nimport React from 'react';\nimport BoardState from './boardState.js';\n\n// Card pool input components\nconst CardPoolInput = function (props) {\n  return (\n    <textarea id={props.id} rows=\"5\" cols=\"33\">{props.initialText}</textarea>\n  );\n}\n\nconst isNumber = (text) => {\n  return !Number.isNaN(Number(text));\n}\n\nconst parseCardPoolText = (cardPoolText) => {\n  const lines = cardPoolText.split(\"\\n\").filter(l => l.trim().length > 0);\n  const sections = [[], []]; // two sections - maindeck and sideboard\n  var currentSection = sections[0];\n\n  for (var line of lines) {\n    if (line.includes('Sideboard')) {\n      currentSection = sections[1];\n      continue;\n    }\n\n    currentSection.push(parseLine(line));\n  }\n\n  return sections;\n}\n\nconst parseLine = (line) => {\n  var [part1, part2] = line.split('(');\n\n  var quantity, name;\n  // If the line starts with a number, consume that part of the string and store in quantity\n  if (isNumber(part1[0])) {\n    const i = part1.indexOf(' ');\n    var quantityPart = part1.substring(0, i)\n    if (quantityPart.endsWith('x')) {\n      quantityPart = quantityPart.slice(0, -1); // trim off \"x\" in the case of \"1x <cardname>\"\n    }\n    quantity = Number(quantityPart);\n    name = part1.substring(i).trim();\n  } else {\n    quantity = 1;\n    name = part1.trim();\n  }\n\n  var set = ''\n  if (part2) {\n    set = part2.split(')')[0].trim();\n  }\n\n  return {name, quantity, set};\n}\n\nclass LoadInputButton extends React.Component {\n  load() {\n    const rawInput = document.getElementById(this.props.inputElementId).value;\n    const [maindeckCardEntries, sideboardCardEntries] = parseCardPoolText(rawInput);\n\n    const numCols = this.props.topLevelContainer.state.boardState.numCols;\n    const cardLoader = this.props.topLevelContainer.state.cardLoader;\n    this.props.topLevelContainer.setState({\n      boardState: new BoardState(cardLoader, maindeckCardEntries, numCols, this.props.topLevelContainer),\n      sideboardState: new BoardState(cardLoader, sideboardCardEntries, 1, this.props.topLevelContainer)\n    });\n  }\n\n  render() {\n    return (\n      <input type=\"button\" onClick={() => this.load()} value=\"Load cards\" />\n    );\n  }\n}\n\nconst cardPoolToText = (maindeck, sideboard, includeSet) => {\n  return maindeck.asText(includeSet) +\n    \"\\n\\n// Sideboard\\n\" +\n    sideboard.asText(includeSet);\n}\n\n// Export button components\nconst writeToClipboardAndAlert = (text) => {\n  navigator.clipboard.writeText(text)\n    .then(() => alert(`Copied to clipboard:\\n\\n${text}`),\n      () => alert(`Failed to copy to clipboard`));\n}\n\nconst ExportButton = function (props) {\n  return (\n    <input type=\"button\"\n      onClick={() => {\n        const output = cardPoolToText(props.boardState, props.sideboardState, false);\n        writeToClipboardAndAlert(output);\n      }}\n      value=\"Export to Cockatrice\" />\n  );\n}\n\n// Copy link button components\nconst SaveLinkButton = function (props) {\n  return (\n    <input type=\"button\"\n      onClick={() => {\n        const encoded = window.btoa(cardPoolToText(props.boardState, props.sideboardState, true));\n        window.history.replaceState({}, '', `?cards=${encoded}`);\n        writeToClipboardAndAlert(window.location.href);\n      }}\n      value=\"Copy Link\" />\n  );\n}\n\nexport {\n  CardPoolInput,\n  LoadInputButton,\n  ExportButton,\n  SaveLinkButton,\n  parseCardPoolText,\n};","// This file contains a component for adding basic lands to the deck.\n\nimport React from 'react';\n\nfunction LandAdder(props) {\n  const selectorId = props.id + '-selector';\n  const inputCountId = props.id + '-input-count';\n\n  return (\n    <div>\n      <select id={selectorId}>\n        <option value='Snow-Covered Plains'>Snow-Covered Plains</option>\n        <option value='Snow-Covered Island'>Snow-Covered Island</option>\n        <option value='Snow-Covered Swamp'>Snow-Covered Swamp</option>\n        <option value='Snow-Covered Mountain'>Snow-Covered Mountain</option>\n        <option value='Snow-Covered Forest'>Snow-Covered Forest</option>\n      </select>\n      <input type='number'\n        min='0'\n        max='20'\n        placeholder='1'\n        id={inputCountId}\n      />\n      <input type='button'\n        onClick={() => {\n          const land = document.getElementById(selectorId).value;\n          const count = parseInt(document.getElementById(inputCountId).value) || 1;\n          props.addLand(land, count, 'ICE')\n        }}\n        value='Add Basic Lands'\n      />\n    </div>\n  );\n}\n\nexport {\n  LandAdder,\n};","// This file contains logic for loading card data from Scryfall\nexport default class CardLoader {\n  constructor() {\n    this.nextId = 0;\n    this.cardDataCache = {};\n  }\n\n  async getCardData(cardName, set = '') {\n    const newCard = {\n      name: cardName,\n      set: set,\n      id: this.nextId,\n    };\n    this.nextId++;   \n\n    if (!this.cardDataCache[cardName]) {\n      this.cardDataCache[cardName] = {};\n    }\n\n    if (!this.cardDataCache[cardName][set]) {\n      this.cardDataCache[cardName][set] = await this.getScryfallCardData(cardName, set);\n    }\n\n    newCard.data = this.cardDataCache[cardName][set];\n    return newCard;\n  }\n\n  async getScryfallCardData(cardName, set = '') {\n    const url = `https://api.scryfall.com/cards/named?exact=${encodeURI(cardName)}&set=${set}`;\n    const response = await fetch(url);\n    var cardJson = await response.json();\n\n    try {\n      // If double-faced card, some of the fields we need will be on the faces instead.\n      // Add all the fields from the front face to the top-level object.\n      if ('card_faces' in cardJson) {\n        Object.assign(cardJson, cardJson['card_faces'][0]);\n      }\n\n      var colors = cardJson['colors'].join('');\n      var color_pile = colors;\n      if (color_pile.length > 1) {\n        color_pile = 'M' // multicolor\n      } else if (color_pile.length === 0) {\n        colors = color_pile = 'C' // colorless\n      }\n\n      if (cardJson['type_line'].includes('Land')) {\n        color_pile = 'L';\n      }\n      \n      return {\n        color_pile,\n        colors,\n        cmc: cardJson['cmc'],\n        imageURL: cardJson['image_uris']['normal'],\n        mana_cost: cardJson['mana_cost'],\n      }\n    } catch (e) {\n      console.error(`Error parsing card data: ${e}. Card JSON: ${JSON.stringify(cardJson)}`);\n      return {\n        color_pile : 'C',\n        colors: 'C',\n        cmc: 0,\n        imageURL: `https://api.scryfall.com/cards/named?format=image&exact=${cardName}`\n      }\n    }\n  }\n}","import React from 'react';\nimport Modal from 'react-modal';\n\n\nexport default class SampleHandModalButton extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      showModal: false\n    };\n\n    this.handleOpenModal = () => {this.setState({showModal: true})};\n    this.handleCloseModal = () => {this.setState({showModal: false})};\n  }\n\n  render () {\n    return (\n      <>\n        <button onClick={this.handleOpenModal}>Sample Hand</button>\n        <Modal\n           isOpen={this.state.showModal}\n           onRequestClose={this.handleCloseModal}\n           contentLabel=\"Sample Hand\"\n           style={{\n             overlay: {zIndex: 1000}\n           }}\n        >\n        <SampleHandModalContent maindeckBoardState={this.props.maindeckBoardState} />\n        <p>(ESC or click outside to close)</p>\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst HAND_SIZE = 7;\n\n/**\n * Copied from https://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array\n * Shuffles array in place. ES6 version\n * @param {Array} a items An array containing the items.\n */\nfunction shuffle(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\n\nconst IMG_WIDTH = 146;\nconst IMG_HEIGHT = 204;\n\nclass SampleHandModalContent extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      ...this.getNewHandState(),\n      lockedCard: \"\"\n    };\n  }\n\n  getNewHandState() {\n    const shuffledDeck = shuffle(this.props.maindeckBoardState.getCards());\n    const hand = []\n\n    if (this.state && !!this.state.lockedCard) {\n      // If a card is selected to be locked into your opening hand,\n      // find it and add it to the hand first.\n      const i = shuffledDeck.findIndex(card => card.name == this.state.lockedCard);\n      hand.push(shuffledDeck[i]);\n      shuffledDeck.splice(i, 1);\n    }\n\n    const numCardsToDraw = Math.min(HAND_SIZE - hand.length, shuffledDeck.length);\n    for (var _ of Array(numCardsToDraw)) {\n      hand.push(shuffledDeck.pop());\n    }\n\n    return {shuffledDeck, hand}\n  }\n\n  drawCard() {\n    if (this.state.shuffledDeck.length > 0) {\n      this.state.hand.push(this.state.shuffledDeck.pop());\n      this.setState({});\n    }\n  }\n\n  handleChange(e) {\n    this.setState({lockedCard: e.target.value});\n  }\n\n  render () {\n    const cardImageURLs = this.state.hand.map(card => card.data.imageURL);\n    const images = cardImageURLs.map(url => <img src={url} width={IMG_WIDTH} height={IMG_HEIGHT} />);\n    const dedupedCardNames = Array.from(new Set(this.props.maindeckBoardState.getCards().map(card => card.name))).sort();\n    const options = dedupedCardNames.map(name => <option value={name}>{name}</option>);\n\n    return (\n      <>\n        <button onClick={() => this.drawCard()}>Draw card</button>\n        <button onClick={() => this.setState(this.getNewHandState())}>New hand</button>\n        <select id=\"reserved-card-select\" onChange={(e) => this.handleChange(e)} tabindex=\"-1\">\n          <option value=\"\">-- Lock a card into opening hand --</option>\n          {options}\n        </select>\n        <div>\n          {images}\n        </div>\n      </>\n    );\n  }\n}","import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { DndProvider } from 'react-dnd-multi-backend';\nimport HTML5toTouch from 'react-dnd-multi-backend/dist/esm/HTML5toTouch';\nimport { useDrag, useDrop } from 'react-dnd'\nimport './index.css';\nimport BoardState from './boardState.js';\nimport { CardPoolInput, LoadInputButton, ExportButton, SaveLinkButton, parseCardPoolText } from './importExport.js';\nimport { LandAdder } from './landAdder.js';\nimport CardLoader from './cardLoader.js';\nimport SampleHandModalButton from './sampleHand.js';\n\nconst IMG_WIDTH = 146;\nconst IMG_HEIGHT = 204;\nconst COL_WIDTH = IMG_WIDTH + 1;\nconst CARD_STACKING_OFFSET = 25;\nconst NUM_COLS = 8; // TODO: make this consistent with css width\nconst DEFAULT_INITIAL_CARDS = ['Battle Hymn', 'Reaper King', 'Death or Glory', 'Mindless Automaton',\n                               'Wizard Mentor', 'Crow Storm', \"Gaea's Touch\"].join(\"\\n\");\n\n// Card react component - displays a single draggable card. If you hover over the normal card image, \n// also displays a larger version next to it.\nfunction Card(props) {\n  const [{ isDragging }, drag] = useDrag({\n    item: { type: \"Card\", card: props.card },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n\n  const imageURL = props.card.data ? props.card.data.imageURL : ''\n\n  const [hoverVisible, setHoverVisible] = useState(false);\n  const hoverVisibility = (hoverVisible && !isDragging) ? 'visible' : 'hidden';\n\n  return (\n    [\n      // The normal version of the card.\n      <img\n        ref={drag}\n        src={imageURL} width={IMG_WIDTH} height={IMG_HEIGHT}\n        onClick={() => props.moveCardToOtherBoard(props.card)}\n        // We use onMouseMove here instead of onMouseOver because apparently onMouseOver will fire after\n        // you drag and drop the top card of a stack, leading to weird behavior.\n        onMouseMove={(e) => !hoverVisible && setHoverVisible(true)}\n        onMouseLeave={() => setHoverVisible(false)}\n        style={{\n          position: \"absolute\",\n          top: `${props.top}px`,\n          left: `${props.left}px`,\n          zIndex: `${props.zIndex}`,\n        }} />,\n      // The larger \"preview\" image - only visible when hovering over the normal version of the card.\n      <img\n        src={imageURL} width={IMG_WIDTH * 2} height={IMG_HEIGHT * 2}\n        style={{\n          visibility: hoverVisibility,\n          position: \"absolute\",\n          top: `${props.top}px`,\n          left: `${props.left + IMG_WIDTH}px`,\n          zIndex: 999\n        }}\n      />,\n    ]\n  );\n}\n\n// Board react component - the space that all the cards are in\nfunction Board(props) {\n  const [{ mousePos }, drop] = useDrop({\n    accept: \"Card\",\n    drop: (item, monitor) => dropCard(props.boardState, monitor.getClientOffset(), item.card),\n    collect: monitor => ({\n      mousePos: monitor.getClientOffset(),\n    }),\n  })\n\n  const cardImages = [];\n  const cardColumns = props.boardState.cardColumns;\n  for (var col = 0; col < cardColumns.length; col++) {\n    for (var i = 0; i < cardColumns[col].length; i++) {\n      const card = cardColumns[col][i]\n      const topOffset = CARD_STACKING_OFFSET * i;\n      const leftOffset = COL_WIDTH * col;\n\n      cardImages.push(<Card\n        key={card.id.toString()}\n        card={card}\n        top={topOffset}\n        left={leftOffset}\n        zIndex={i}\n        moveCardToOtherBoard={props.moveCardToOtherBoard}\n      />);\n    }\n  }\n\n  const widthPx = COL_WIDTH * props.boardState.numCols;\n  return (\n    <div ref={drop} className=\"card-space\" style={{position: \"relative\", width: `${widthPx}px`}}>\n      {cardImages}\n      <div style={{position: \"absolute\", bottom: \"5px\", right: \"5px\"}}>{props.boardState.numCards()} cards</div>\n    </div>\n  );\n}\n\n// Helper used by Board\nconst dropCard = (boardState, clientOffset, card) => {\n  const newCol = Math.min(Math.floor(clientOffset.x / COL_WIDTH), boardState.numCols - 1);\n  const newIndexInCol = Math.floor(clientOffset.y / CARD_STACKING_OFFSET);\n\n  boardState.moveCard(card, newCol, newIndexInCol);\n}\n\n// Sort components\nfunction SortByCmcButton (props) {\n  return (\n    <input type=\"button\"\n      onClick={() => props.topLevelContainer.setState({boardState: props.topLevelContainer.state.boardState.sortByCmc()})}\n      value=\"Sort by CMC\" />\n  );\n}\n\nfunction SortByColorButton (props) {\n  return (\n    <input type=\"button\"\n      onClick={() => props.topLevelContainer.setState({boardState: props.topLevelContainer.state.boardState.sortByColor()})}\n      value=\"Sort by Color\" />\n  );\n}\n\n// Instructions component\nfunction Instructions (props) {\n  return (\n    <div  style={{float: 'right'}}>\n      Large space is the maindeck, smaller space is the sideboard. <br />\n      Drag and drop to move cards around. <br />\n      Click a card to move it from the maindeck to sideboard or vice versa. <br />\n      Multiple formats are supported for \"Load cards\", including MTG Arena. <br />\n      Valid example lines: <br />\n      Wizard Mentor <br />\n      1 Battle Hymn <br />\n      5 Forest <br />\n      1 Cogwork Assembler (AER) 145 <br />\n      1 Songs of the Damned (ME2)\n    </div>\n  );\n}\n\nconst initialCards = () => {\n  const encodedCardsFromParams = new URLSearchParams(window.location.search).get(\"cards\");\n  return encodedCardsFromParams ? window.atob(encodedCardsFromParams) : DEFAULT_INITIAL_CARDS\n}\n\n// Top-level container component to put everything together\nclass TopLevelContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const cardLoader = new CardLoader();\n    const [maindeckCardEntries, sideboardCardEntries] = parseCardPoolText(initialCards());\n    this.state = {\n      cardLoader: cardLoader,\n      boardState: new BoardState(cardLoader, maindeckCardEntries, NUM_COLS, this),\n      sideboardState: new BoardState(cardLoader, sideboardCardEntries, 1, this),\n    };\n  }\n  \n  moveCardToOtherBoard(card, board, otherBoard) {\n    board.removeCard(card);\n    otherBoard.addCard(card);\n    // Hacky way to force everything to re-render; TODO: make board states immutable and directly set the state with new versions\n    this.setState({});\n  }\n\n  async addLand(landName, count, set='') {\n    const currentBoard = this.state.boardState;\n    const cardLoader = this.state.cardLoader;\n    for (var _ of Array(count)) {\n      const card = await cardLoader.getCardData(landName, set)\n      currentBoard.addCard(card)\n    }\n\n    this.setState({});\n  }\n\n  render() {\n    const CARD_POOL_INPUT_ELEMENT_ID = 'card-pool-input';\n    const moveCardToSideboard = (card) => {\n      this.moveCardToOtherBoard(card, this.state.boardState, this.state.sideboardState);\n    }\n    const moveCardToMainboard = (card) => {\n      this.moveCardToOtherBoard(card, this.state.sideboardState, this.state.boardState);\n    }\n\n    return (\n      <div>\n        <Board boardState={this.state.boardState} moveCardToOtherBoard={moveCardToSideboard} />\n        <Board boardState={this.state.sideboardState} moveCardToOtherBoard={moveCardToMainboard} />\n        <CardPoolInput id={CARD_POOL_INPUT_ELEMENT_ID} initialText={initialCards()} />\n        <LoadInputButton inputElementId={CARD_POOL_INPUT_ELEMENT_ID} topLevelContainer={this} />\n        <SortByCmcButton topLevelContainer={this} />\n        <SortByColorButton topLevelContainer={this} />\n        <ExportButton boardState={this.state.boardState} sideboardState={this.state.sideboardState} />\n        <SaveLinkButton boardState={this.state.boardState} sideboardState={this.state.sideboardState} />\n        <SampleHandModalButton maindeckBoardState={this.state.boardState} />\n        <LandAdder addLand={(land, count, set) => this.addLand(land, count, set)}/>\n        <Instructions />\n      </div>\n    );\n  }\n}\n\nReactDOM.render(\n  <DndProvider options={HTML5toTouch}>\n    <TopLevelContainer />\n  </DndProvider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}