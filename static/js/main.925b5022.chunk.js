(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(t,e,a){t.exports=a(31)},31:function(t,e,a){"use strict";a.r(e);var n=a(19),r=a(22),c=a(20),o=a(24),i=a(21),u=a(13),s=a(14),l=a(4),d=a.n(l),p=a(15),f=a(1),m=a.n(f),h=a(25),v=a.n(h),b=(a(37),a(27)),y=a(39),C=a(40),j=a(41),O=["Battle Hymn","Reaper King","Death or Glory","Mindless Automaton","Wizard Mentor","Crow Storm","Gaea's Touch"],x=function(){var t=Object(p.a)(d.a.mark((function t(e){var a,n,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://api.scryfall.com/cards/named?exact=".concat(encodeURI(e)),t.next=3,fetch(a);case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,(c=r.color_identity.join("")).length>1?c="M":0===c.length&&(c="C"),t.abrupt("return",{color_pile:c,cmc:r.cmc});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){function t(e){Object(u.a)(this,t),e||(e=[]),this.loadCardPool(e)}return Object(s.a)(t,[{key:"loadCardPool",value:function(){var t=Object(p.a)(d.a.mark((function t(e){var a=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cardColumns=Object(i.a)(Array(8)).map((function(t){return[]})),this.nextId=0,e.forEach((function(t){return a.addCard(t)}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addCard",value:function(){var t=Object(p.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={name:e,id:this.nextId},this.cardColumns[0].push(a),this.nextId++,x(e).then((function(t){return a.data=t}));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"moveCard",value:function(t,e,a){for(var n,r=0;r<this.cardColumns.length;r++)for(var c=this.cardColumns[r],o=0;o<c.length;o++)c[o].id===t&&(n=c[o],c.splice(o,1));a=Math.min(a,this.cardColumns[e].length),this.cardColumns[e].splice(a,0,n)}},{key:"sortByCmc",value:function(){var t,e=Object(i.a)(Array(8)).map((function(t){return[]})),a=Object(o.a)(this.cardColumns.flat());try{for(a.s();!(t=a.n()).done;){var n=t.value;e[Math.min(n.data.cmc,7)].push(n)}}catch(r){a.e(r)}finally{a.f()}return this.cardColumns=e,this}}]),t}();function g(t){var e=Object(C.a)({item:{type:"Card",card:t.card}}),a=Object(c.a)(e,2),n=(a[0],a[1]),r="https://api.scryfall.com/cards/named?format=image&exact=".concat(encodeURI(t.card.name));return m.a.createElement("img",{ref:n,src:r,width:146,height:204,style:{position:"absolute",top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),zIndex:"".concat(t.zIndex)}})}function k(t){for(var e=Object(j.a)({accept:"Card",drop:function(e,a){return S(t.boardState,a.getClientOffset(),e.card)},collect:function(t){return{mousePos:t.getClientOffset()}}}),a=Object(c.a)(e,2),n=(a[0].mousePos,a[1]),r=[],o=t.boardState.cardColumns,i=0;i<o.length;i++)for(var u=0;u<o[i].length;u++){var s=o[i][u],l=25*u,d=147*i;r.push(m.a.createElement(g,{key:s.id.toString(),card:s,top:l,left:d,zIndex:u}))}return m.a.createElement("div",{ref:n,className:"card-space",style:{position:"relative"}},r)}var S=function(t,e,a){var n=Math.min(Math.floor(e.x/147),7),r=Math.floor(e.y/25);t.moveCard(a.id,n,r)};function w(t){return m.a.createElement("textarea",{id:t.id,rows:"5",cols:"33"})}var I=function(t){Object(r.a)(a,t);var e=Object(n.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"load",value:function(){var t=document.getElementById("card-pool-input").value.split("\n").map((function(t){return t.trim()}));this.props.topLevelContainer.setState({boardState:new E(t)})}},{key:"render",value:function(){var t=this;return m.a.createElement("input",{type:"button",onClick:function(){return t.load()},value:"Load cards"})}}]),a}(m.a.Component);function M(t){return m.a.createElement("input",{type:"button",onClick:function(){return t.topLevelContainer.setState({boardState:t.boardState.sortByCmc()})},value:"Sort by CMC"})}var B=function(t){Object(r.a)(a,t);var e=Object(n.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).state={boardState:new E(O)},n}return Object(s.a)(a,[{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement(k,{boardState:this.state.boardState}),m.a.createElement(w,{id:"card-pool-input"}),m.a.createElement("br",null),m.a.createElement(I,{topLevelContainer:this}),m.a.createElement(M,{topLevelContainer:this,boardState:this.state.boardState}))}}]),a}(m.a.Component);v.a.render(m.a.createElement(y.a,{backend:b.a},m.a.createElement(B,null)),document.getElementById("root"))},37:function(t,e,a){}},[[30,1,2]]]);
//# sourceMappingURL=main.925b5022.chunk.js.map