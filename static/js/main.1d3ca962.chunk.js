(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(t,e,a){t.exports=a(38)},35:function(t,e,a){},38:function(t,e,a){"use strict";a.r(e);var n=a(5),r=a(6),o=a(15),c=a(16),i=a(22),u=a(0),l=a.n(u),s=a(24),d=a.n(s),p=a(27),m=a(40),f=a(42),h=a(41),v=(a(35),a(25)),b=a(3),C=a.n(b),y=a(9),S=a(13),E=function(){function t(e,a){Object(n.a)(this,t),e||(e=[]),this.numCols=a,this.loadCardPool(e)}return Object(r.a)(t,[{key:"loadCardPool",value:function(){var t=Object(S.a)(C.a.mark((function t(e){var a=this;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cardColumns=Object(y.a)(Array(this.numCols)).map((function(t){return[]})),this.nextId=0,e.forEach((function(t){return a.createAndAddCard(t)}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAndAddCard",value:function(){var t=Object(S.a)(C.a.mark((function t(e){var a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:e,id:this.nextId,currentBoard:this},this.cardColumns[0].push(a),this.nextId++,O(e).then((function(t){return a.data=t})),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addCard",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;(!a||a>this.cardColumns[e].length)&&(a=this.cardColumns[e].length),this.cardColumns[e].splice(a,0,t),t.currentBoard=this}},{key:"removeCard",value:function(t){for(var e=0;e<this.cardColumns.length;e++)for(var a=this.cardColumns[e],n=0;n<a.length;n++)if(a[n].id===t.id)return a.splice(n,1),t;throw"Tried to remove card, but it wasn't in this board: "+JSON.stringify(t)}},{key:"moveCard",value:function(){var t=Object(S.a)(C.a.mark((function t(e,a,n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.currentBoard.removeCard(e),this.addCard(e,a,n);case 2:case"end":return t.stop()}}),t,this)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"sortByCmc",value:function(){var t,e=Object(y.a)(Array(this.numCols)).map((function(t){return[]})),a=Object(v.a)(this.cardColumns.flat());try{for(a.s();!(t=a.n()).done;){var n=t.value;e[Math.min(n.data.cmc,7)].push(n)}}catch(r){a.e(r)}finally{a.f()}return this.cardColumns=e,this}},{key:"sortByColor",value:function(){var t=Object(y.a)(Array(this.numCols)).map((function(t){return[]})),e=["L","W","U","B","R","G","C","M"],a=this.cardColumns.flat().filter((function(t){return"M"!==t.data.color_pile})),n=this.cardColumns.flat().filter((function(t){return"M"===t.data.color_pile}));n.sort((function(t,e){return t.data.colors.localeCompare(e.data.colors)}));for(var r=0,o=[].concat(Object(y.a)(a),Object(y.a)(n));r<o.length;r++){var c=o[r];t[e.indexOf(c.data.color_pile)].push(c)}return this.cardColumns=t,this}}]),t}(),O=function(){var t=Object(S.a)(C.a.mark((function t(e){var a,n,r,o,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://api.scryfall.com/cards/named?exact=".concat(encodeURI(e)),t.next=3,fetch(a);case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,o=r.colors.join(""),(c=o).length>1?c="M":0===c.length&&(o=c="C"),r.type_line.includes("Land")&&(c="L"),t.abrupt("return",{color_pile:c,colors:o,cmc:r.cmc});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(t){return l.a.createElement("textarea",{id:t.id,rows:"5",cols:"33"})},g=function(t){Object(c.a)(a,t);var e=Object(o.a)(a);function a(){return Object(n.a)(this,a),e.apply(this,arguments)}return Object(r.a)(a,[{key:"load",value:function(){var t=document.getElementById(this.props.inputElementId).value.split("\n").map((function(t){var e;return e=t[0],(t=Number.isNaN(Number(e))?t:t.substring(t.indexOf(" "))).trim()})).filter((function(t){return t.trim().length>0})),e=this.props.topLevelContainer.state.boardState.numCols;this.props.topLevelContainer.setState({boardState:new E(t,e),sideboardState:new E([],1)})}},{key:"render",value:function(){var t=this;return l.a.createElement("input",{type:"button",onClick:function(){return t.load()},value:"Load cards"})}}]),a}(l.a.Component),k=function(t){return l.a.createElement("input",{type:"button",onClick:function(){var e,a,n,r=(e=t.boardState.cardColumns.flat(),a=t.sideboardState.cardColumns.flat(),e.map((function(t){return t.name})).join("\n")+"\n\n// Sideboard\n"+a.map((function(t){return t.name})).join("\n"));n=r,navigator.clipboard.writeText(n).then((function(){return alert("Copied to clipboard:\n\n".concat(n))}),(function(){return alert("Failed to copy to clipboard")}))},value:"Export to Cockatrice"})},x=["Battle Hymn","Reaper King","Death or Glory","Mindless Automaton","Wizard Mentor","Crow Storm","Gaea's Touch"];function L(t){var e=Object(f.a)({item:{type:"Card",card:t.card}}),a=Object(i.a)(e,2),n=(a[0],a[1]),r="https://api.scryfall.com/cards/named?format=image&exact=".concat(encodeURI(t.card.name));return l.a.createElement("img",{ref:n,src:r,width:146,height:204,onDoubleClick:function(){return function(e){var a=t.topLevelContainer.state.boardState,n=t.topLevelContainer.state.sideboardState,r=e.currentBoard===a?n:a;e.currentBoard.removeCard(e),r.addCard(e),t.topLevelContainer.setState(t.topLevelContainer.state)}(t.card)},style:{position:"absolute",top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),zIndex:"".concat(t.zIndex)}})}function w(t){for(var e=Object(h.a)({accept:"Card",drop:function(e,a){return B(t.boardState,a.getClientOffset(),e.card)},collect:function(t){return{mousePos:t.getClientOffset()}}}),a=Object(i.a)(e,2),n=(a[0].mousePos,a[1]),r=[],o=t.boardState.cardColumns,c=0;c<o.length;c++)for(var u=0;u<o[c].length;u++){var s=o[c][u],d=25*u,p=147*c;r.push(l.a.createElement(L,{key:s.id.toString(),card:s,top:d,left:p,zIndex:u,topLevelContainer:t.topLevelContainer}))}var m=147*t.boardState.numCols;return l.a.createElement("div",{ref:n,className:"card-space",style:{position:"relative",width:"".concat(m,"px")}},r)}var B=function(t,e,a){var n=Math.min(Math.floor(e.x/147),t.numCols-1),r=Math.floor(e.y/25);t.moveCard(a,n,r)};function I(t){return l.a.createElement("input",{type:"button",onClick:function(){return t.topLevelContainer.setState({boardState:t.topLevelContainer.state.boardState.sortByCmc()})},value:"Sort by CMC"})}function M(t){return l.a.createElement("input",{type:"button",onClick:function(){return t.topLevelContainer.setState({boardState:t.topLevelContainer.state.boardState.sortByColor()})},value:"Sort by Color"})}function A(t){return l.a.createElement("div",{style:{float:"right"}},"Large space is the maindeck, smaller space is the sideboard. ",l.a.createElement("br",null),"Drag and drop to move cards around. ",l.a.createElement("br",null),"Double-click a card to move it from the maindeck to sideboard or vice versa. ",l.a.createElement("br",null),'"Load cards" format is one card name per line, or [quantity] [cardname] per line.')}var N=function(t){Object(c.a)(a,t);var e=Object(o.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).state={boardState:new E(x,8),sideboardState:new E([],1)},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(w,{boardState:this.state.boardState,topLevelContainer:this}),l.a.createElement(w,{boardState:this.state.sideboardState,topLevelContainer:this}),l.a.createElement(j,{id:"card-pool-input"}),l.a.createElement(g,{inputElementId:"card-pool-input",topLevelContainer:this}),l.a.createElement(I,{topLevelContainer:this}),l.a.createElement(M,{topLevelContainer:this}),l.a.createElement(k,{boardState:this.state.boardState,sideboardState:this.state.sideboardState}),l.a.createElement(A,null))}}]),a}(l.a.Component);d.a.render(l.a.createElement(m.a,{backend:p.a},l.a.createElement(N,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.1d3ca962.chunk.js.map